<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 920 520" font-family="Segoe UI, system-ui, sans-serif" font-size="11">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="violet" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#7c3aed"/>
      <stop offset="100%" style="stop-color:#5b21b6"/>
    </linearGradient>
    <linearGradient id="cyan" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#0891b2"/>
    </linearGradient>
    <linearGradient id="emerald" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="amber" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="rose" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f43f5e"/>
      <stop offset="100%" style="stop-color:#e11d48"/>
    </linearGradient>
  </defs>
  <rect width="920" height="520" fill="url(#bg)"/>
  <rect x="10" y="10" width="900" height="500" rx="12" fill="none" stroke="#334155" stroke-width="1"/>

  <!-- Title -->
  <text x="460" y="36" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="700">MCP Knowledge Hub  Infraestructura</text>
  <text x="460" y="54" text-anchor="middle" fill="#94a3b8" font-size="11">EC2 � Docker Compose � http://mcp.domoticore.co</text>

  <!-- Users -->
  <g transform="translate(30, 80)">
    <rect width="120" height="56" rx="8" fill="rgba(6,182,212,0.15)" stroke="#06b6d4" stroke-width="1.5"/>
    <text x="60" y="24" text-anchor="middle" fill="#22d3ee" font-weight="600">Usuarios</text>
    <text x="60" y="40" text-anchor="middle" fill="#94a3b8">Cursor / IDE</text>
    <text x="60" y="52" text-anchor="middle" fill="#94a3b8">Navegador</text>
  </g>

  <!-- Nginx -->
  <g transform="translate(200, 88)">
    <rect width="100" height="40" rx="8" fill="rgba(148,163,184,0.2)" stroke="#94a3b8" stroke-width="1.5"/>
    <text x="50" y="22" text-anchor="middle" fill="#e2e8f0" font-weight="600">Nginx</text>
    <text x="50" y="34" text-anchor="middle" fill="#94a3b8">:80</text>
  </g>
  <path d="M 150 108 L 198 108" stroke="#64748b" stroke-width="1" fill="none"/>
  <path d="M 300 108 L 318 108" stroke="#64748b" stroke-width="1" fill="none"/>

  <!-- Webapp -->
  <g transform="translate(320, 72)">
    <rect width="100" height="72" rx="8" fill="rgba(59,130,246,0.15)" stroke="#3b82f6" stroke-width="1.5"/>
    <text x="50" y="26" text-anchor="middle" fill="#60a5fa" font-weight="600">Webapp</text>
    <text x="50" y="42" text-anchor="middle" fill="#94a3b8">Next.js</text>
    <text x="50" y="58" text-anchor="middle" fill="#94a3b8">:3000</text>
  </g>

  <!-- Gateway -->
  <g transform="translate(320, 168)">
    <rect width="100" height="88" rx="8" fill="rgba(124,58,237,0.2)" stroke="#8b5cf6" stroke-width="1.5"/>
    <text x="50" y="26" text-anchor="middle" fill="#a78bfa" font-weight="600">Gateway</text>
    <text x="50" y="42" text-anchor="middle" fill="#94a3b8">Node.js + TS</text>
    <text x="50" y="58" text-anchor="middle" fill="#94a3b8">MCP � REST</text>
    <text x="50" y="74" text-anchor="middle" fill="#94a3b8">:3001</text>
  </g>
  <path d="M 310 108 L 310 168 M 330 144 L 330 168" stroke="#64748b" stroke-width="1" fill="none"/>

  <!-- Supervisor -->
  <g transform="translate(320, 280)">
    <rect width="100" height="48" rx="8" fill="rgba(16,185,129,0.15)" stroke="#10b981" stroke-width="1.5"/>
    <text x="50" y="24" text-anchor="middle" fill="#34d399" font-weight="600">Supervisor</text>
    <text x="50" y="40" text-anchor="middle" fill="#94a3b8">indexaci�n 2 min</text>
  </g>

  <!-- Worker -->
  <g transform="translate(320, 348)">
    <rect width="100" height="40" rx="8" fill="rgba(245,158,11,0.15)" stroke="#f59e0b" stroke-width="1.5"/>
    <text x="50" y="24" text-anchor="middle" fill="#fbbf24" font-weight="600">Worker</text>
    <text x="50" y="36" text-anchor="middle" fill="#94a3b8">Python (jobs)</text>
  </g>

  <!-- Datastores -->
  <g transform="translate(500, 72)">
    <rect width="88" height="52" rx="8" fill="rgba(6,182,212,0.15)" stroke="#06b6d4" stroke-width="1.5"/>
    <text x="44" y="24" text-anchor="middle" fill="#22d3ee" font-weight="600">PostgreSQL</text>
    <text x="44" y="42" text-anchor="middle" fill="#94a3b8">:5432 mcp_hub</text>
  </g>
  <g transform="translate(500, 136)">
    <rect width="88" height="52" rx="8" fill="rgba(245,158,11,0.15)" stroke="#f59e0b" stroke-width="1.5"/>
    <text x="44" y="24" text-anchor="middle" fill="#fbbf24" font-weight="600">Redis</text>
    <text x="44" y="42" text-anchor="middle" fill="#94a3b8">:6379</text>
  </g>
  <g transform="translate(500, 200)">
    <rect width="88" height="52" rx="8" fill="rgba(16,185,129,0.15)" stroke="#10b981" stroke-width="1.5"/>
    <text x="44" y="24" text-anchor="middle" fill="#34d399" font-weight="600">Qdrant</text>
    <text x="44" y="42" text-anchor="middle" fill="#94a3b8">:6333</text>
  </g>
  <g transform="translate(500, 264)">
    <rect width="88" height="52" rx="8" fill="rgba(244,63,94,0.15)" stroke="#f43f5e" stroke-width="1.5"/>
    <text x="44" y="24" text-anchor="middle" fill="#fb7185" font-weight="600">InfluxDB</text>
    <text x="44" y="42" text-anchor="middle" fill="#94a3b8">:8086</text>
  </g>

  <!-- Grafana -->
  <g transform="translate(620, 72)">
    <rect width="88" height="52" rx="8" fill="rgba(249,115,22,0.15)" stroke="#f97316" stroke-width="1.5"/>
    <text x="44" y="24" text-anchor="middle" fill="#fb923c" font-weight="600">Grafana</text>
    <text x="44" y="42" text-anchor="middle" fill="#94a3b8">:3002</text>
  </g>

  <!-- Connections -->
  <path d="M 420 108 L 498 98" stroke="#64748b" stroke-width="1" fill="none" stroke-dasharray="4 2"/>
  <path d="M 420 212 L 498 226" stroke="#34d399" stroke-width="1.5" fill="none"/>
  <path d="M 420 256 L 498 290" stroke="#22d3ee" stroke-width="1.5" fill="none"/>
  <path d="M 370 256 L 498 290" stroke="#34d399" stroke-width="1" fill="none" stroke-dasharray="4 2"/>
  <path d="M 370 304 L 498 226" stroke="#34d399" stroke-width="1" fill="none" stroke-dasharray="4 2"/>
  <path d="M 420 368 L 498 162" stroke="#fbbf24" stroke-width="1" fill="none"/>
  <path d="M 420 368 L 498 290" stroke="#fbbf24" stroke-width="1" fill="none"/>
  <path d="M 420 368 L 498 226" stroke="#fbbf24" stroke-width="1" fill="none"/>
  <path d="M 588 98 L 618 98" stroke="#fb923c" stroke-width="1" fill="none"/>
  <path d="M 544 290 L 544 98" stroke="#fb7185" stroke-width="1" fill="none" stroke-dasharray="2 2"/>

  <!-- EC2 box -->
  <rect x="195" y="68" width="525" height="338" rx="8" fill="none" stroke="#475569" stroke-width="1" stroke-dasharray="6 4"/>
  <text x="210" y="82" fill="#64748b" font-size="10">EC2 � Docker Compose</text>

  <!-- Legend -->
  <g transform="translate(30, 440)">
    <text x="0" y="0" fill="#94a3b8" font-size="10">Leyenda:  Gateway/Supervisor/Worker � datastores; - - - opcional / m�tricas</text>
  </g>
</svg>
